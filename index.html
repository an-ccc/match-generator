<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è³½äº‹æ›´æ–°ç”¢ç”Ÿå™¨</title>
<style>
  body { 
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
    padding: 15px; 
    max-width: 450px; 
    margin: 0 auto; 
    background-color: #f4f7f6;
  }
  .card {
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 8px 16px rgba(0,0,0,0.08);
  }
  .form-group { margin-bottom: 12px; }
  label { font-weight: bold; display: block; margin-bottom: 6px; color: #333; }
  input[type="text"] { 
    width: 100%; 
    padding: 12px; 
    font-size: 20px; 
    border: 2px solid #ddd; 
    border-radius: 8px; 
    box-sizing: border-box;
    text-align: center;
    background-color: #fff;
  }
  input[type="text"]:focus {
    outline: none;
    border-color: #007BFF;
    background-color: #f0f7ff;
  }
  .level-btns { display: flex; gap: 8px; margin-bottom: 15px; }
  .level-btns button { 
    flex: 1; 
    padding: 12px 5px; 
    font-size: 16px; 
    font-weight: bold;
    cursor: pointer; 
    border: 2px solid #007BFF; 
    background-color: white; 
    color: #007BFF; 
    border-radius: 8px; 
  }
  .level-btns button.active { 
    background-color: #007BFF; 
    color: white; 
  }
  .keypad { 
    display: grid; 
    grid-template-columns: repeat(3, 1fr); 
    gap: 10px; 
    margin: 15px 0; 
  }
  .keypad button { 
    padding: 18px; 
    font-size: 22px; 
    cursor: pointer; 
    background-color: #ffffff; 
    border: 1px solid #dcdcdc; 
    border-radius: 10px; 
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    font-weight: 600;
  }
  .keypad button:active { background-color: #e9e9e9; transform: translateY(2px); }
  .keypad .action-btn { background-color: #ffebeb; color: #d00; border-color: #ffcccc; }
  .generate-btn { 
    width: 100%; 
    padding: 16px; 
    font-size: 20px; 
    font-weight: bold;
    background-color: #28a745; 
    color: white; 
    border: none; 
    border-radius: 10px; 
    cursor: pointer;
    margin-top: 10px;
  }
  .result-container { margin-top: 20px; }
  .output { 
    white-space: pre-wrap; 
    background: #2d2d2d; 
    color: #f8f8f8;
    padding: 20px; 
    border-radius: 10px; 
    min-height: 100px; 
    font-size: 19px; 
    line-height: 1.6;
    border: 1px solid #1a1a1a;
  }
  .copy-btn {
    width: 100%;
    margin-top: 10px;
    padding: 14px;
    font-size: 18px;
    font-weight: bold;
    background-color: #007BFF;
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
  }
  .tip {
    font-size: 12px;
    color: #888;
    margin-top: 5px;
    text-align: center;
  }
</style>
</head>
<body>

<div class="card">
  <h2 style="text-align: center; margin-bottom: 20px;">ğŸš€ è³½äº‹æ›´æ–°ç”¢ç”Ÿå™¨</h2>

  <div class="form-group">
    <label>é¸æ“‡ç­‰ç´š</label>
    <div class="level-btns">
      <button type="button" onclick="setLevel('1200', this, 80)">1200</button>
      <button type="button" onclick="setLevel('3400', this, 110)">3400</button>
      <button type="button" onclick="setLevel('6600', this, 180)">6600</button>
    </div>
    <div class="tip" id="time-tip">è«‹é¸æ“‡ç­‰ç´šä»¥è‡ªå‹•è¨ˆç®—æˆªè²·æ™‚é–“</div>
  </div>

  <div class="form-group">
    <label>è¼¸å…¥äººæ•¸</label>
    <input type="text" id="people" placeholder="é»æ“Šå¾Œè¼¸å…¥" readonly onclick="setActive('people')">
  </div>

  <div class="form-group">
    <label>é–‹å§‹æ™‚é–“ (æ™‚:åˆ†)</label>
    <input type="text" id="startTime" placeholder="ä¾‹å¦‚ 19:45" readonly onclick="setActive('startTime')">
  </div>

  <div class="keypad">
    <button type="button" onclick="typeKey('1')">1</button>
    <button type="button" onclick="typeKey('2')">2</button>
    <button type="button" onclick="typeKey('3')">3</button>
    <button type="button" onclick="typeKey('4')">4</button>
    <button type="button" onclick="typeKey('5')">5</button>
    <button type="button" onclick="typeKey('6')">6</button>
    <button type="button" onclick="typeKey('7')">7</button>
    <button type="button" onclick="typeKey('8')">8</button>
    <button type="button" onclick="typeKey('9')">9</button>
    <button type="button" onclick="typeKey(':')">:</button>
    <button type="button" onclick="typeKey('0')">0</button>
    <button type="button" class="action-btn" onclick="backspace()">âŒ« é€€æ ¼</button>
  </div>

  <button class="generate-btn" onclick="generateResult()">âœ¨ é»æˆ‘ç”¢ç”Ÿçµæœ</button>

  <div class="result-container">
    <div id="output" class="output">ç­‰å¾…è¼¸å…¥ä¸­...</div>
    <button class="copy-btn" onclick="copyText()">ğŸ“‹ ä¸€éµè¤‡è£½æ–‡å­—</button>
  </div>
</div>

<script>
  let selectedLevel = "";
  let activeInput = null;
  let timeOffset = 0; // å„²å­˜ä¸åŒç­‰ç´šéœ€è¦åŠ çš„åˆ†é˜æ•¸

  function setLevel(level, btnElement, offset) {
    selectedLevel = level;
    timeOffset = offset;
    document.querySelectorAll('.level-btns button').forEach(btn => btn.classList.remove('active'));
    btnElement.classList.add('active');
    
    // é¡¯ç¤ºæç¤ºå‘ŠçŸ¥ä½¿ç”¨è€…åŠ äº†å¤šä¹…
    const h = Math.floor(offset / 60);
    const m = offset % 60;
    document.getElementById('time-tip').textContent = `å·²é¸æ“‡ ${level} (æˆªè²·æ™‚é–“å°‡è‡ªå‹• +${h > 0 ? h + 'å°æ™‚' : ''}${m > 0 ? m + 'åˆ†' : ''})`;
  }

  function setActive(id) {
    activeInput = document.getElementById(id);
    document.querySelectorAll('input').forEach(input => input.style.borderColor = '#ddd');
    activeInput.style.borderColor = '#007BFF';
  }

  function typeKey(key) {
    if (activeInput) {
      activeInput.value += key;
    } else {
      alert('è«‹å…ˆé»æ“Šä¸Šæ–¹çš„ã€Œäººæ•¸ã€æˆ–ã€Œæ™‚é–“ã€æ¬„ä½å†æŒ‰æ•¸å­—ï¼');
    }
  }

  function backspace() {
    if (activeInput) {
      activeInput.value = activeInput.value.slice(0, -1);
    }
  }

  function generateResult() {
    const people = document.getElementById('people').value;
    const startTime = document.getElementById('startTime').value;

    if (!selectedLevel || !people || !startTime) {
      alert('æ‰€æœ‰æ¬„ä½éƒ½è¦å¡«å¯«å–”ï¼');
      return;
    }

    let cutOffTime = "";
    if (startTime.includes(':')) {
      let parts = startTime.split(':');
      let hours = parseInt(parts[0], 10);
      let mins = parseInt(parts[1], 10);
      
      if (isNaN(hours) || isNaN(mins)) {
        alert('æ™‚é–“æ ¼å¼ä¸æ­£ç¢ºï¼Œè«‹è¼¸å…¥æ•¸å­—èˆ‡å†’è™Ÿã€‚');
        return;
      }

      // æ ¹æ“šé¸æ“‡çš„ç­‰ç´šåŠ æ™‚é–“
      let totalMins = hours * 60 + mins + timeOffset; 
      let newHours = Math.floor(totalMins / 60) % 24;
      let newMins = totalMins % 60;
      
      cutOffTime = `${newHours.toString().padStart(2, '0')}:${newMins.toString().padStart(2, '0')}`;
    } else {
      alert('æ™‚é–“è«‹è¼¸å…¥å†’è™Ÿï¼Œä¾‹å¦‚ 19:45');
      return;
    }

    const resultStr = `â™¡è³½äº‹æ›´æ–°â™¡\n${selectedLevel}\nç›®å‰äººæ•¸: ${people}\né–‹å§‹æ™‚é–“: ${startTime}\næˆªè²·æ™‚é–“: ${cutOffTime}`;
    
    document.getElementById('output').textContent = resultStr;
  }

  function copyText() {
    const textToCopy = document.getElementById('output').textContent;
    if (textToCopy === 'ç­‰å¾…è¼¸å…¥ä¸­...') return;
    
    navigator.clipboard.writeText(textToCopy).then(() => {
      alert('âœ… è¤‡è£½æˆåŠŸï¼');
    });
  }
</script>

</body>
</html>
